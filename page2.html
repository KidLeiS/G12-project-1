<!DOCTYPE html>
<html lang="en">
  <!-- head -->
  <head>
    <!-- meta data -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- page title -->
    <title>Flight Flamingo</title>
    <!-- bootstrap css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <!-- external styles -->
    <link rel="stylesheet" href="assets/styles/main.css" />
  </head>
  <!-- body -->
  <body>
    <!-- header -->
    <header id="header">
      <div class="container">
        <div class="d-flex flex-column justify-content-center align-items-start">
          <div id="logo" class="d-flex flex-column justify-content-center align-items-start text-center">
            <!-- logo -->
            <h1>Flight Flamingo</h1>
            <p>Thank you for choosing us.</p>
          </div>
        </div>
      </div>
    </header>

    <section id="available-flights">
      <div class="container">
        <h2>Available flights</h2>
        <p>Here's a list of the availble flights.</p>
        <div class="flights row d-flex flex-row justify-content-evenly align-items-center">
          <div class="col-xs-12 col-md-2 col-lg-2">
            <h4>Price:</h4>
          </div>
          <div class="col-xs-12 col-md-2 col-lg-2">
            <h4>Departure date:</h4>
          </div>
          <div class="col-xs-12 col-md-2 col-lg-2">
            <h4>Return date:</h4>
          </div>
          <div class="col-xs-12 col-md-2 col-lg-2">
            <h4>Airline:</h4>
          </div>
          <div class="col-xs-12 col-md-2 col-lg-2"></div>
        </div>
        <div class="flights row d-flex flex-row justify-content-evenly align-items-center">
          <div class="col-xs-12 col-md-2 col-lg-2">
            <span id="priceDisplay"></span>
          </div>
          <div class="col-xs-12 col-md-2 col-lg-2">
            <span id="departureDateDisplay"></span>
          </div>
          <div class="col-xs-12 col-md-2 col-lg-2">
            <span id="returnDateDisplay"></span>
          </div>
          <div class="col-xs-12 col-md-2 col-lg-2">
            <span id="carriersDisplay"></span>
          </div>
          <div class="col-xs-12 col-md-2 col-lg-2">
            <button>Choose Flight</button>
          </div>
        </div>
      </div>
    </section>

    <!-- divs with id - text added from javascript/Local Storage data -->
    <div class="container">
      <div id="priceDisplay"></div>
      <div id="departureDateDisplay"></div>
      <div id="returnDateDisplay"></div>
      <!-- not working - null
           <div id="stopsDisplay"></div> 
        -->
      <div id="stopsDisplay"></div>
      <div id="carriersDisplay"></div>
    </div>
    <!-- contact us -->
    <section id="contact-us">
      <div class="container">
        <div class="text-center">
          <div class="row d-flex flex-row justify-content-between align-items-center">
            <div class="col-xs-6 col-md-6 col-lg-6">
              <h2>Contact Us</h2>
              <p>Need to reach us? This is the place to do so.</p>
            </div>
            <!-- contact form -->
            <div class="col-xs-6 col-md-6 col-lg-6">
              <form action="">
                <label for="name">Enter your name:</label>
                <input type="text" name="name" id="name" placeholder="Albus Dumbledore" />
                <label for="email">Enter your email:</label>
                <input type="email" name="email" id="email" placeholder="albus.dumbledore@hogwarts.com" />
                <label for="message">How can we help?</label>
                <textarea name="message" id="message" cols="30" rows="10" placeholder="Be aware that the school has been infiltrated!"></textarea>
                <button id="submit">Submit</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- footer -->
    <footer>
      <div class="container">
        <div class="d-flex flex-wrap justify-content-between align-items-center py-3">
          <div class="col-md-4 d-flex align-items-center">
            <span class="mb-3 mb-md-0 text-muted">Â© 2024 Flight Flamingo</span>
          </div>
          <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
            <li class="ms-3">
              <a class="text-muted" href="#">Home</a>
            </li>
            <li class="ms-3">
              <a class="text-muted" href="#about-us">Abous Us</a>
            </li>
            <li class="ms-3">
              <a class="text-muted" href="#contact-us">Contact Us</a>
            </li>
          </ul>
        </div>
      </div>
    </footer>

    <!----- JavaScript to get data from Localstorag and Display on screen ------>
    <script>
      // Get search results in Local Storage
      var storedSearchResults = JSON.parse(localStorage.getItem('search'));

      // Check if there are stored search results by checking if array length is greater than 0
      if (storedSearchResults && storedSearchResults.length > 0) {
        //if true, create variables from Local Storage data, one by one.
        var firstResult = storedSearchResults[0];
        var firstPrice = firstResult.price;
        var departureDate = firstResult.legs[0].startTime;
        var returnDate = firstResult.legs[0].endTime;
        //var layoverVar = firstResult.legs[0].stops;
        var airlineVar = firstResult.legs[0].carriers;

        // Update the content of the element with id "priceDisplay"
        document.getElementById('priceDisplay').textContent = firstPrice;

        // Update the content of the element with id "departureDateDisplay" "dateDisplay"
        document.getElementById('departureDateDisplay').textContent = departureDate;

        // Update the content of the element with id "returnDateDisplay"
        document.getElementById('returnDateDisplay').textContent = returnDate;

        // Update the content of the element with id "stops" - not working- commented out
        //document.getElementById("stopsDispla").textContent = "Stops: " + layoverVar;

        // Update the content of the element with id "carriersDisplay"
        document.getElementById('carriersDisplay').textContent = airlineVar;

        //if no results (storedSearchResults && storedSearchResults.length > 0) run else
      } else {
        console.log('No stored search results available.');
      }
    </script>
    <!------------------------------------------------------------------------------>

    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- bootstrap js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <!-- Dayjs -->
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>

    <!-- Our own javascript -->
    <script src="assets/js/script.js"></script>

    <!-- jquery script to launch modal -->
    <script>
      $(document).ready(function () {
        $('#numberTravellersInput').click(function () {
          $('#travellersModal').modal('show');
          console.log('modal should open');
        });
      });

      $(function () {
        $('[data-toggle="tooltip"]').tooltip();
      });
    </script>
  </body>
</html>
